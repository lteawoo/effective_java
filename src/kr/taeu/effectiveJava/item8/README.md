# finalizer와 cleaner 사용을 피하라
자바는 객체 소멸자를 두 가지 제공한다.
1. finalizer - 예측할 수 없고, 상황에 다라 위험 할 수 있어 일반적으로 불필요
2. cleaner - finalizer의 대안으로 java9에 등장, 여전히 예측할 수 없고 느리고 일반적으로 불필요.

왜 사용을 피하라는 걸까?
* 즉시 수행된다는 보장이 없다.
* 위 둘로는 제때 실행되어야 하는 작업은 절대 할수 없다.
* java 명세를 보면 수행 시점 뿐만 아니라 수행 여부 조차 보장 할 수 없다.(전혀 수행하지 못하고 종료 될 수 있다.)
* 상태를 영구적으로 수정하는 작업에서는 절대 finalizer와 cleaner에 의존해서는 안된다.(DB 같은 공유 자원의 영구 락 해제를 finalizer나 cleaner에 맡기면 분산 시스템 전체가 천천히 멈추게 될 것)

그렇다면 대안은? **AutoCloseable을 구현하고, 클라이언트에서 인스턴스를 다 사용하면 close 메서드를 호출해 주면 된다.** 각 객체는 자신이 닫혔는지를 추적해 주면 좋다. 다시 말해 close 메서드에서 이 객체는 더 이상 유효하지 않음을 필드에 기록하고 객체가 닫힌 후 불렸다면 IllegalStateException을 던지는 것이다.

그럼 도대체 어디에 쓰이는 물건들인가
1. close 메서드를 호출하지 않는 것에 대한 안전망(즉시, 혹은 끝까지 호출되리라는 보장은 없지만) 자원 회수를 늦게 하는 것이 안하는 것보다는 나으니 말이다.
2. 네이티브 피어(일반 자바 객체가 네이티브 메서드를 통해 기능을 위임한 네이티브 객체)와 연결된 객체에서 쓰인다. 네이티브 피어는 자바 객체가 아니니 GC는 그 존재를 모른다.